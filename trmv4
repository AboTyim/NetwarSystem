
r = redis.StrictRedis(host='localhost', port=6379, db=0)
y = api.verify_credentials()
name = y.screen_name

lists = api.lists_all(name)
for list in lists:
   # check re for ^trm
   if re.match("trm-", list.slug):
      for member in tweepy.Cursor(api.list_members,name,list.slug).items():
          try:
              # see if its in cache
              y = r.get(member.screen_name)
              if not y:
                  z = api.get_user(member.screen_name)
                  if z:
                         print(z.screen_name + " " + z.id_str)
                         r.set(z.screen_name,z.id_str)
                         print(z.id_str + " " + json.dumps(z._json))
                         r.set(z.id_str,json.dumps(z._json))
          except (RuntimeError, TypeError, NameError):
              pass
